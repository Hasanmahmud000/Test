<!DOCTYPE html><html lang="bn"><head><meta charset="UTF-8"/>
<title>BDStreamHub - Live</title>
<meta name="viewport" content="width=device-width" />
<style>
body{margin:0;font-family:Arial;background:#111;color:#eee;}
nav{background:#222;display:flex;justify-content:space-between;align-items:center;padding:10px;position:sticky;top:0;}
.logo{font-weight:bold;color:#08f;}
.search{border:none;border-radius:50%;width:30px;height:30px;background:#333 center/15px url('data:image/svg+xml;...');outline:none;transition:width .3s;}
.search:focus{width:200px;border-radius:5px;background:none;padding-left:8px;color:#eee;}
.notice{background:#ff0;color:#000;padding:8px;overflow:hidden;white-space:nowrap;animation:scroll-left 20s linear infinite;}
@keyframes scroll-left{0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
.tabs{display:flex;justify-content:center;margin:10px 0;}
.tabs button{background:#222;color:#eee;border:none;padding:8px 16px;margin:0 4px;border-radius:5px 5px 0 0;cursor:pointer;}
.tabs button.active{background:#08f;}
#match-list{max-width:800px;margin:auto;padding:10px;}
.match{background:#222;border-radius:8px;margin-bottom:15px;padding:12px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;}
.teams{flex:1;display:flex;align-items:center;justify-content:center;font-weight:bold;}
.teams img{width:40px;height:40px;border-radius:50%;margin:0 8px;border:2px solid #08f;}
.time-info{flex:1;text-align:right;color:#aaa;}
.countdown,.live-time{margin-top:4px;color:#08f;font-weight:bold;}
.live-blink{display:inline-block;background:red;padding:3px 8px;border-radius:4px;animation:blink 1s infinite;color:#fff;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:0.3;}}
.stream-links a{background:#08f;color:#fff;padding:6px 10px;margin:4px;border-radius:4px;text-decoration:none;}
</style></head><body>

<nav><div class="logo">BDStreamHub</div>
<input id="search" class="search" type="text" placeholder="Search">
<a href="https://t.me/bdstreamhub" target="_blank" style="color:#08f;font-weight:bold;">Join Telegram</a></nav>

<div id="notice" class="notice">Loading notice...</div>
<div class="tabs">
  <button id="liveBtn" class="active">Live</button>
  <button id="upcomingBtn">Upcoming</button>
</div>
<div id="match-list"></div>

<script>
const API="https://script.google.com/macros/s/AKfycbwAlJqOwHZ_qq32Qh1-Z_-qsEsiu7hXALpNT7509P8t5FffGbAsnNmjypI15zGhaO-cCg/exec";
let data=[], noticeText='';

async function load(){
  const r = await fetch(API);
  const j = await r.json();
  data = j.matches;
  noticeText = j.notice;
  document.getElementById('notice').innerText = noticeText;

  const now = Date.now();
  const liveMatches = data.filter(m => m.Status === 'Live' || new Date(m.StartTime).getTime() <= now);

  if (liveMatches.length > 0) {
    render('Live');
    liveBtn.classList.add('active');
    upcomingBtn.classList.remove('active');
  } else {
    render('Upcoming');
    upcomingBtn.classList.add('active');
    liveBtn.classList.remove('active');
  }
}
function formatMs(ms){
  if(ms<=0)return"00:00:00";
  const s=Math.floor(ms/1000)%60, m=Math.floor(ms/60000)%60, h=Math.floor(ms/3600000);
  return [h,m,s].map(v=>String(v).padStart(2,'0')).join(':');
}
function render(status){
  const now=Date.now();
  const list=data.filter(m=>m.Status===status || (status==='Live'&&new Date(m.StartTime)<=now));
  const cont=document.getElementById('match-list');
  cont.innerHTML = list.map((m,i)=>{
    const st=new Date(m.StartTime).getTime(), diff=now-st;
    const live= diff>=0;
    const timer=live ? `LIVE <span class="live-blink"></span> ${formatMs(diff)}` : formatMs(st-now);
    return `
    <div class="match">
      <div class="teams">
        <img src="${m.Team1Img}" alt="${m.Team1}">
        ${m.Team1} vs ${m.Team2}
        <img src="${m.Team2Img}" alt="${m.Team2}">
      </div>
      <div class="time-info">
        ${new Date(m.StartTime).toLocaleString('bn-BD')}<br>
        <span class="${live?'live-time':'countdown'}">${timer}</span><br>
        <div class="stream-links">
          ${m.Links.map(link=>`<a href="${link.url}" target="_blank">${link.name}</a>`).join('')}
        </div>
        <div class="watermark" style="margin-top:6px;color:#555;font-size:12px">BDStreamHub</div>
      </div>
    </div>`;
  }).join('');
}
document.getElementById('liveBtn').onclick=()=>{render('Live'); liveBtn.classList.add('active'); upcomingBtn.classList.remove('active');};
document.getElementById('upcomingBtn').onclick=()=>{render('Upcoming'); upcomingBtn.classList.add('active'); liveBtn.classList.remove('active');};
load(); setInterval(load,60000);
</script>

</body></html>
